; -*- mode: conf-windows; coding: windows-1251-dos -*-
;
; Дверь в бункере Сахарова

[logic]
active = ph_door@closed ;ph_door@locked

[ph_door@locked]
locked = true
closed = true
snd_init = trader_door_unlock
snd_open_start = trader_door_open_start
snd_close_start = trader_door_close_start
snd_close_stop = trader_door_close_stop
on_info = ph_door@closed %-yan_bunker_door_2_open% ;{+yan_find_scientist_done} ph_door@closed, {+yan_bunker_door_2_open -yan_scientist_door_1_open} ph_door@unlocked,{+yan_scientist_door_1_open} ph_door@scientist_locked, {+yan_scientist_door_2_open} ph_door@scientist_unlocked

[ph_door@unlocked]
locked = false
closed = false
snd_init = trader_door_unlock
snd_open_start = trader_door_open_start
snd_close_start = trader_door_close_start
snd_close_stop = trader_door_close_stop
on_info = ph_door@opened %+yan_bunker_door_2_open% ;{-yan_bunker_door_2_open -yan_scientist_door_1_open} ph_door@locked,{+yan_scientist_door_2_open} ph_door@scientist_unlocked,{+yan_scientist_door_1_open} ph_door@scientist_locked

[ph_door@scientist_unlocked]
locked = false
closed = false
snd_init = trader_door_unlock
snd_open_start = trader_door_open_start
snd_close_start = trader_door_close_start
snd_close_stop = trader_door_close_stop
on_info = ph_door@opened %+yan_bunker_door_2_open% ;{-yan_scientist_door_2_open +yan_scientist_door_1_open} ph_door@scientist_locked,{-yan_scientist_door_2_open -yan_scientist_door_1_open} ph_door@locked

[ph_door@scientist_locked]
locked = true
closed = true
snd_init = trader_door_unlock
snd_open_start = trader_door_open_start
snd_close_start = trader_door_close_start
snd_close_stop = trader_door_close_stop
on_info = ph_door@closed %-yan_bunker_door_2_open% ;{+yan_scientist_door_2_open -yan_scientist_door_1_open} ph_door@scientist_unlocked,{-yan_scientist_door_2_open -yan_scientist_door_1_open} ph_door@locked

[ph_door@closed]
locked = false
closed = true
snd_init = trader_door_unlock
snd_open_start = trader_door_open_start
snd_close_start = trader_door_close_start
snd_close_stop = trader_door_close_stop
;on_info = {+yan_bunker_door_2_open -yan_scientist_door_1_open} ph_door@opened
on_use = ph_door@opened %+yan_bunker_door_2_open%

[ph_door@opened]
locked = false
closed = false
snd_init = trader_door_unlock
snd_open_start = trader_door_open_start
snd_close_start = trader_door_close_start
snd_close_stop = trader_door_close_stop
on_info = {-yan_bunker_door_2_open -yan_scientist_door_1_open} ph_door@closed
on_use = ph_door@closed %-yan_bunker_door_2_open%
