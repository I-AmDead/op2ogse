-- -*- mode: lua; coding: windows-1251-dos -*-

function attach( sm )
  sm:subscribe({ signal = "on_update",  fun = this.on_update })
  sm:subscribe({ signal = "on_destroy", fun = this.countmem  })
end


function countmem()
  log2(
    "[%s]: garbage collector count: %s",
    script_name(), collectgarbage( "count" )
  )
end


function on_update()
  ogse_signals.get_mgr():reschedule( 30000 )
  countmem()
end
